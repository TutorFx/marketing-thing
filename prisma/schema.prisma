datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
  // previewFeatures = []
}

model User {
  id          String        @id @default(cuid())
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  email       String        @unique
  picture     String?
  password    String?
  firstname   String?
  lastname    String?
  role        Role?         @default(USER)
  plan        Plan          @default(HOBBY)
  connection Connection[]   @relation("userConnection")
  budget      DailyBudget[] @relation("userBudget")
}

model Guest {
  id         String       @id @default(cuid())

  budget      DailyBudget[] @relation("guestBudget")
  connection Connection[] @relation("guestConnection")
}

model Connection {
  ip   String @id

  user User[] @relation("userConnection")
  guest Guest[] @relation("guestConnection")
}

model DailyBudget {
  id          DateTime @id
  dailyPoints Int      @default(0)

  user User[] @relation("userBudget")
  guest Guest[] @relation("guestBudget")
}

enum Role {
  ADMIN
  USER
}

enum Plan {
  PRO
  HOBBY
}
